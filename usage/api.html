<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Admin API - Packeton Docs</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><li class="part-title">Introduction</li><li class="chapter-item expanded "><a href="../index.html">Overview</a></li><li class="chapter-item expanded affix "><li class="part-title">Setup</li><li class="chapter-item expanded "><a href="../installation.html">Installation</a></li><li class="chapter-item expanded "><a href="../installation-docker.html">Using docker</a></li><li class="chapter-item expanded "><a href="../reverse-proxy.html">Using a reverse proxy</a></li><li class="chapter-item expanded affix "><li class="part-title">Usage</li><li class="chapter-item expanded "><a href="../usage/index.html">Administration</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../usage/api.html" class="active">Admin API</a></li><li class="chapter-item expanded "><a href="../webhook.html">Outgoing Webhook</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../webhook.html">Intro</a></li><li class="chapter-item expanded "><a href="../webhook.html">Examples</a></li><li class="chapter-item expanded "><a href="../webhook/webhook-secrets.html">Secrets</a></li><li class="chapter-item expanded "><a href="../webhook/wh-security.html">Security Policy</a></li><li class="chapter-item expanded "><a href="../webhook/wh-test.html">Testing</a></li></ol></li><li class="chapter-item expanded "><a href="../usage/update-packages.html">Update Webhooks</a></li><li class="chapter-item expanded "><a href="../usage/customers.html">Customer Users</a></li><li class="chapter-item expanded "><a href="../usage/credential.html">SSH Credential</a></li><li class="chapter-item expanded "><a href="../usage/mirroring.html">Mirroring Packages</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../usage/mirroring.html">Configuration</a></li><li class="chapter-item expanded "><a href="../usage/mirroring.html">Strict mode</a></li></ol></li></ol></li><li class="chapter-item expanded "><a href="../authentication.html">User Authentication</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../authentication-jwt.html">JWT Configuration</a></li><li class="chapter-item expanded "><a href="../authentication-ldap.html">LDAP Configuration</a></li></ol></li><li class="chapter-item expanded "><a href="../usage/storage.html">S3 Storage Provider</a></li><li class="chapter-item expanded "><a href="../usage/custom-page.html">Custom landing page</a></li><li class="chapter-item expanded "><a href="../usage/security-monitoring.html">Security Monitoring</a></li><li class="chapter-item expanded "><a href="../usage/migrate.html">Migrate from Satis</a></li><li class="chapter-item expanded "><a href="../oauth2.html">OAuth2 Integrations</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../pull-request-review.html">Pull Request review</a></li><li class="chapter-item expanded "><a href="../oauth2/github-oauth.html">GitHub Setup</a></li><li class="chapter-item expanded "><a href="../oauth2/githubapp.html">GitHub AppBot</a></li><li class="chapter-item expanded "><a href="../oauth2/gitlab-integration.html">GitLab Setup</a></li><li class="chapter-item expanded "><a href="../oauth2/gitea.html">Gitea Setup</a></li><li class="chapter-item expanded "><a href="../oauth2/bitbucket.html">Bitbucket Setup</a></li><li class="chapter-item expanded "><a href="../oauth2/login-expression.html">Login Restriction</a></li></ol></li><li class="chapter-item expanded "><li class="part-title">Development</li><li class="chapter-item expanded "><a href="../dev/CONTRIBUTING.html">Contributing</a></li><li class="chapter-item expanded "><a href="../dev/configuration.html">Configuration Reference</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Packeton Docs</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/vtsykun/packeton" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                        <a href="https://github.com/vtsykun/packeton/edit/master/docs/usage/api.md" title="Suggest an edit" aria-label="Suggest an edit">
                            <i id="git-edit-button" class="fa fa-edit"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="api-documentation"><a class="header" href="#api-documentation">API documentation</a></h1>
<p>About API authorization methods see <a href="../authentication.html#composer-api-authentication">here</a></p>
<h4 id="submit-package"><a class="header" href="#submit-package">Submit package</a></h4>
<pre><code>POST https://example.com/api/create-package?token=&lt;api_token&gt;
Content-Type: application/json

{
    &quot;repository&quot;: {
        &quot;url&quot;: &quot;git@github.com:symfony/mime.git&quot;
    }
}
</code></pre>
<h4 id="listing-package-names"><a class="header" href="#listing-package-names">Listing package names</a></h4>
<pre><code>GET https://example.com/packages/list.json?token=&lt;api_token&gt;

# Result
{
  &quot;packageNames&quot;: [
    &quot;[vendor]/[package]&quot;,
    ...
  ]
}
</code></pre>
<h4 id="list-packages-by-vendor"><a class="header" href="#list-packages-by-vendor">List packages by vendor</a></h4>
<pre><code>
GET https://example.com/packages/list.json?vendor=[vendor]&amp;token=&lt;api_token&gt;

{
  &quot;packageNames&quot;: [
    &quot;[vendor]/[package]&quot;,
    ...
  ]
}
</code></pre>
<h4 id="list-packages-by-type"><a class="header" href="#list-packages-by-type">List packages by type</a></h4>
<pre><code>GET https://example.com/packages/list.json?type=[type]&amp;token=&lt;api_token&gt;

{
  &quot;packageNames&quot;: [
    &quot;[vendor]/[package]&quot;,
    ...
  ]
}
</code></pre>
<h4 id="get-the-package-git-changelog"><a class="header" href="#get-the-package-git-changelog">Get the package git changelog</a></h4>
<p>Get git diff between two commits or tags. <strong>WARNING</strong> Working only if repository was cloned by git. 
If you want to use this feature for GitHub you need set composer config flag no-api see here</p>
<pre><code>GET https://example.com/packages/{name}/changelog?token=&lt;api_token&gt;&amp;from=3.1.14&amp;to=3.1.15

{
  &quot;result&quot;: [
    &quot;BAP-18660: ElasticSearch 6&quot;,
    &quot;BB-17293: Back-office &gt;Wrong height&quot;
  ],
  &quot;error&quot;: null,
  &quot;metadata&quot;: {
    &quot;from&quot;: &quot;3.1.14&quot;,
    &quot;to&quot;: &quot;3.1.15&quot;,
    &quot;package&quot;: &quot;okvpn/platform&quot;
  }
}
</code></pre>
<h4 id="getting-package-data"><a class="header" href="#getting-package-data">Getting package data</a></h4>
<p>This is the preferred way to access the data as it is always up-to-date, and dumped to static files so it is very efficient on our end.</p>
<p>You can also send If-Modified-Since headers to limit your bandwidth usage 
and cache the files on your end with the proper filemtime set according to our Last-Modified header.</p>
<p>There are a few gotchas though with using this method:</p>
<ul>
<li>It only provides you with the package metadata but not information about the maintainers, download stats or github info.</li>
<li>It contains providers information which must be ignored but can appear confusing at first. This will disappear in the future though.</li>
</ul>
<pre><code>GET https://example.com/p/[vendor]/[package].json?token=&lt;api_token&gt;

{
  &quot;packages&quot;: {
    &quot;[vendor]/[package]&quot;: {
      &quot;[version1]&quot;: {
        &quot;name&quot;: &quot;[vendor]/[package],
        &quot;description&quot;: [description],
        // ...
      },
      &quot;[version2]&quot;: {
        // ...
      }
      // ...
    }
  }
}
</code></pre>
<p><strong>Composer v2</strong> </p>
<pre><code>GET https://example.com/p2/firebase/php-jwt.json


{
  &quot;minified&quot;: &quot;composer/2.0&quot;,
  &quot;packages&quot;: {
    &quot;[vendor]/[package]&quot;: [... list versions ]
  }
}
</code></pre>
<p><strong>Using the API</strong></p>
<p>The JSON API for packages gives you all the infos we have including downloads, 
dependents count, github info, etc. However, it is generated dynamically so for performance reason we cache the responses 
for twelve hours. As such if the static file endpoint described above is enough please use it instead.</p>
<pre><code>GET https://example.com/packages/[vendor]/[package].json?token=&lt;api_token&gt;

{
  &quot;package&quot;: {
    &quot;name&quot;: &quot;[vendor]/[package],
    &quot;description&quot;: [description],
    &quot;time&quot;: [time of the last release],
    &quot;maintainers&quot;: [list of maintainers],
    &quot;versions&quot;: [list of versions and their dependencies, the same data of composer.json]
    &quot;type&quot;: [package type],
    &quot;repository&quot;: [repository url],
    &quot;downloads&quot;: {
      &quot;total&quot;: [numbers of download],
      &quot;monthly&quot;: [numbers of download per month],
      &quot;daily&quot;: [numbers of download per day]
    },
    &quot;favers&quot;: [number of favers]
  }
}
</code></pre>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../usage/index.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next" href="../webhook.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../usage/index.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next" href="../webhook.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr.min.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../searcher.js"></script>

        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->


    </body>
</html>
